<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="api-base-url" content="" />
  <title>The Tutor â€” Grade 9 AI Tutor</title>
  <meta name="description" content="The Tutor is a sweet, friendly AI study tutor for Sri Lankan Grade 9 students. Get textbook-aligned help with Math, Science, English, and more." />
  <link rel="canonical" href="https://officialtutorai.netlify.app/" />
  <meta property="og:title" content="The Tutor â€” Grade 9 AI Tutor" />
  <meta property="og:description" content="A sweet, friendly AI tutor for Sri Lankan Grade 9 students. Textbook-aligned help with Math, Science, English, and more." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://officialtutorai.netlify.app/" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="The Tutor â€” Grade 9 AI Tutor" />
  <meta name="twitter:description" content="A sweet, friendly AI tutor for Sri Lankan Grade 9 students. Textbook-aligned help with Math, Science, English, and more." />
  <link rel="icon" href="data:,">
  <link rel="stylesheet" href="styles.css">
  <script src="loginRedirect.js"></script>
</head>

<body>
  <noscript>This app needs JavaScript enabled to work.</noscript>
  <div class="app" role="application" aria-label="Grade 9 AI Tutor">
    <aside class="sidebar" aria-label="Sidebar" role="region">
      <div class="liquidGlass-effect"></div>
      <div class="liquidGlass-tint"></div>
      <div class="liquidGlass-shine"></div>
      <div class="liquidGlass-content">
        <div class="sidebar-tabs" role="tablist" aria-label="Sidebar tabs">
          <button class="tab-btn active" data-tab="chats" aria-selected="true" role="tab">
            <svg class="tab-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
              stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
            <span>Chats</span>
          </button>
          <button class="tab-btn" data-tab="profile" aria-selected="false" role="tab">
            <svg class="tab-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
              stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
            <span>Profile</span>
          </button>
          <button class="tab-btn" data-tab="gamification" aria-selected="false" role="tab">
            <svg class="tab-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
              stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M7.5 16.5l-1.3 1.3a2 2 0 0 1-3.4-1.3l.8-6a4 4 0 0 1 4-3.5h8.8a4 4 0 0 1 4 3.5l.8 6a2 2 0 0 1-3.4 1.3l-1.3-1.3"></path>
              <path d="M8 12h3"></path>
              <path d="M9.5 10.5v3"></path>
              <path d="M16 11.5h.01"></path>
              <path d="M18 13.5h.01"></path>
            </svg>
            <span>Gamification</span>
          </button>
          <button class="tab-btn" data-tab="settings" aria-selected="false" role="tab">
            <svg class="tab-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
              stroke-width="2.8" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="4"></circle>
              <path d="M19.4 15a7.9 7.9 0 0 0 .1-1 7.9 7.9 0 0 0-.1-1l2.1-1.6-2-3.4-2.5 1a7.6 7.6 0 0 0-1.6-.9L13 3h-2l-.4 3.1a7.6 7.6 0 0 0-1.6.9l-2.5-1-2 3.4L6.6 11a7.9 7.9 0 0 0-.1 1 7.9 7.9 0 0 0 .1 1L4.5 14.6l2 3.4 2.5-1a7.6 7.6 0 0 0 1.6.9L11 21h2l.4-3.1a7.6 7.6 0 0 0 1.6-.9l2.5 1 2-3.4L19.4 15z"></path>
            </svg>
            <span>Settings</span>
          </button>
          <button class="tab-btn" data-tab="account" aria-selected="false" role="tab">
            <svg class="tab-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
              stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 21v-2a4 4 0 0 0-3-3.9"></path>
              <path d="M4 21v-2a4 4 0 0 1 4-4h4"></path>
              <circle cx="9" cy="7" r="4"></circle>
              <path d="M16 11l2 2 4-4"></path>
            </svg>
            <span>Account</span>
          </button>
        </div>

        <div class="tab-content active" id="chats-tab" role="tabpanel" aria-labelledby="chats-tab">
          <div class="section-title recent-chats-title">RECENT CHATS</div>
          <div class="chat-list" id="chatList" role="list" tabindex="0" aria-label="Recent chats">
            <div class="recent-chat-item" role="listitem" tabindex="0">
              <div class="recent-chat-title">Algebra Help</div>
              <div class="recent-chat-preview">Can you help me solveâ€¦</div>
              <div class="recent-chat-time">Today, 2:30 PM</div>
            </div>
            <div class="recent-chat-item" role="listitem" tabindex="0">
              <div class="recent-chat-title">Biology Questions</div>
              <div class="recent-chat-preview">What is photosynthesisâ€¦</div>
              <div class="recent-chat-time">Yesterday</div>
            </div>
            <div class="recent-chat-item" role="listitem" tabindex="0">
              <div class="recent-chat-title">Physics Problems</div>
              <div class="recent-chat-preview">Newton's laws of motionâ€¦</div>
              <div class="recent-chat-time">2 days ago</div>
            </div>
          </div>

          <div class="section-title progress-title">TODAY'S PROGRESS</div>
          <div class="progress-block">
            <div class="progress-card streak-card">
              <div class="progress-card-icon"><i data-lucide="flame"></i></div>
              <div class="progress-card-content">
                <div class="progress-card-value">7</div>
                <div class="progress-card-label">Day Streak</div>
              </div>
            </div>
            <div class="progress-card time-card">
              <div class="progress-card-icon"><i data-lucide="clock"></i></div>
              <div class="progress-card-content">
                <div class="progress-card-value">45m</div>
                <div class="progress-card-label">Today</div>
              </div>
            </div>
            <div class="progress-card points-card">
              <div class="progress-card-icon"><i data-lucide="trophy"></i></div>
              <div class="progress-card-content">
                <div class="progress-card-value">1250</div>
                <div class="progress-card-label">Points</div>
              </div>
            </div>
          </div>

          <div class="sidebar-footer" role="contentinfo">
            <button id="newChat" class="icon-btn btn-primary" aria-label="New chat"><i data-lucide="plus"></i> New Chat</button>
            <button id="clearAll" class="icon-btn btn-clear" aria-label="Clear chats">
              <span class="clear-label">Clear</span>
              <svg class="btn-icon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg">
                <path d="M9 3v1H4v2h16V4h-5V3H9zm2 5v9h2V8h-2zm4 0v9h2V8h-2zM7 8v9h2V8H7z" />
              </svg>
            </button>
          </div>
        </div>

        <div class="tab-content" id="profile-tab" role="tabpanel" aria-labelledby="profile-tab" style="display: none;">
          <div class="section-title">Profile</div>

          <div class="profile-card">
            <div class="profile-card-header">
              <div>
                <div class="profile-name" id="profileName">Student</div>
                <div class="profile-sub" id="profileMeta">Grade 9</div>
              </div>
              <div class="profile-controls">
                <label class="profile-label" for="profileLanguage">Language</label>
                <select id="profileLanguage" class="select" aria-label="Switch Language">
                  <option value="English">English</option>
                  <option value="Sinhala">à·ƒà·’à¶‚à·„à¶½</option>
                </select>
              </div>
            </div>

            <div class="profile-feedback">
              <div class="profile-feedback-title" id="profileFeedbackHeadline">Loadingâ€¦</div>
              <div class="profile-feedback-message" id="profileFeedbackMessage">Fetching your progress and feedback.</div>
            </div>

            <div class="profile-progress">
              <div class="profile-progress-row">
                <div class="profile-progress-label" id="profileProgressSummary">Total score: 0</div>
                <div class="profile-progress-label" id="profileAccuracy">Accuracy: 0%</div>
              </div>
              <div class="profile-progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                <div class="profile-progress-bar-fill" id="profileProgressFill" style="width: 0%;"></div>
              </div>
            </div>

            <div class="profile-chart-wrap">
              <canvas id="profileChart" width="320" height="160" aria-label="Progress chart"></canvas>
            </div>

            <div class="profile-topics">
              <div class="profile-topics-title">Topics</div>
              <div class="profile-topics-list" id="profileTopicsList"></div>
            </div>

            <div class="profile-actions">
              <button class="icon-btn btn-clear" id="profileRefreshBtn" type="button" aria-label="Refresh profile">Refresh</button>
              <button class="icon-btn btn-clear" id="profileResetBtn" type="button" aria-label="Reset progress">Reset progress</button>
            </div>
          </div>
        </div>

        <div class="tab-content" id="gamification-tab" role="tabpanel" aria-labelledby="gamification-tab" style="display: none;">
          <div class="section-title">Gamification</div>

          <div class="gamification-card">
            <div class="gamification-header">
              <div class="gamification-title">Your Progress</div>
              <button class="icon-btn btn-clear" id="gamiRefreshBtn" type="button" aria-label="Refresh gamification">Refresh</button>
            </div>

            <div class="gamification-stats">
              <div class="gami-stat">
                <div class="gami-stat-label">Points</div>
                <div class="gami-stat-value" id="gamiPoints">0</div>
              </div>
              <div class="gami-stat">
                <div class="gami-stat-label">Streak</div>
                <div class="gami-stat-value" id="gamiStreak">1 day</div>
              </div>
            </div>

            <div class="gami-progress">
              <div class="gami-progress-row">
                <div class="gami-progress-label" id="gamiProgressLabel">Next badge at 100</div>
              </div>
              <div class="gami-progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                <div class="gami-progress-fill" id="gamiProgressFill" style="width: 0%;"></div>
              </div>
            </div>

            <div class="gami-badges">
              <div class="gami-section-title">Badges</div>
              <div class="gami-badge-grid" id="gamiBadges"></div>
            </div>

            <div class="gami-leaderboard">
              <div class="gami-section-title">Leaderboard</div>
              <div class="gami-table-wrap">
                <table class="gami-table" aria-label="Leaderboard">
                  <thead>
                    <tr>
                      <th>Rank</th>
                      <th>User</th>
                      <th>Points</th>
                      <th>Streak</th>
                    </tr>
                  </thead>
                  <tbody id="gamiLeaderboard"></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <div class="tab-content" id="settings-tab" role="tabpanel" aria-labelledby="settings-tab"
          style="display: none;">
          <div class="section-title settings-title">Settings</div>
          <div class="settings-section">
            <div class="setting-item">
              <label for="settingsLanguage">Language</label>
              <select id="settingsLanguage" class="select" aria-label="Select Language">
                <option value="English">English</option>
                <option value="Sinhala">à·ƒà·’à¶‚à·„à¶½</option>
              </select>
            </div>
            <div class="setting-item">
              <label for="ttsVoiceSelect">AI Voice (Text-to-Speech)</label>
              <select id="ttsVoiceSelect" class="select" aria-label="Select AI voice">
                <option value="">Auto (best available)</option>
              </select>
              <button class="icon-btn btn-clear" id="ttsTestVoice" type="button" aria-label="Test selected voice">Test voice</button>
            </div>
            <div class="setting-item">
              <label for="defaultSubject">Default Subject</label>
              <select id="defaultSubject" class="select" aria-label="Select Default Subject">
                <option>General</option>
                <option>Math</option>
                <option>Science</option>
                <option>History</option>
                <option>English</option>
                <option>Sinhala</option>
              </select>
            </div>
            <div class="setting-item">
              <label>Theme</label>
              <button class="theme-toggle-btn" aria-label="Theme selection">
                <span class="theme-icon"><i data-lucide="sun"></i></span>
                <span class="theme-text">Light Mode</span>
                <span class="theme-chevron">â€º</span>
              </button>
            </div>
            <div class="setting-item">
              <label>Study Goal</label>
              <div class="study-goals" role="group" aria-label="Study goal selection">
                <button class="study-goal-btn" data-goal="30" aria-label="30 minutes"><i data-lucide="target"></i> 30 minutes</button>
                <button class="study-goal-btn active" data-goal="60" aria-label="1 hour"><i data-lucide="target"></i> 1 hour</button>
                <button class="study-goal-btn" data-goal="120" aria-label="2 hours"><i data-lucide="target"></i> 2 hours</button>
                <button class="study-goal-btn" data-goal="180" aria-label="3 hours"><i data-lucide="target"></i> 3 hours</button>
              </div>
            </div>
          </div>
        </div>

        <div class="tab-content" id="account-tab" role="tabpanel" aria-labelledby="account-tab" style="display: none;">
          <div class="section-title account-title">Account</div>
          <div class="account-profile-card">
            <div class="account-avatar-large">
              <div class="avatar-gradient"><i data-lucide="graduation-cap"></i></div>
            </div>
            <div class="account-info">
              <div class="account-name-row">
                <h3 class="account-name">Alex Johnson</h3>
                <button class="edit-icon-btn" aria-label="Edit profile"><i data-lucide="pencil"></i></button>
              </div>
              <div class="account-grade">Grade 9</div>
              <div class="account-stat-row">
                <span class="stat-label">Study Goal:</span>
                <span class="stat-value">Study 1 hour daily</span>
              </div>
              <div class="account-stat-row">
                <span class="stat-label">Current Streak:</span>
                <span class="stat-value streak-value">7 days</span>
              </div>
              <div class="account-stat-row">
                <span class="stat-label">Total Points:</span>
                <span class="stat-value points-value">1250</span>
              </div>
            </div>
          </div>
          <div class="account-menu">
            <button class="account-menu-item" aria-label="Change Avatar">
              <span class="menu-item-text">Change Avatar</span>
              <span class="menu-item-chevron">â€º</span>
            </button>
            <button class="account-menu-item" aria-label="Edit Profile">
              <span class="menu-item-text">Edit Profile</span>
              <span class="menu-item-chevron">â€º</span>
            </button>
            <button class="account-menu-item" aria-label="Study History">
              <span class="menu-item-text">Study History</span>
              <span class="menu-item-chevron">â€º</span>
            </button>
            <button class="account-menu-item" aria-label="Achievements">
              <span class="menu-item-text">Achievements</span>
              <span class="menu-item-chevron">â€º</span>
            </button>
            <button class="account-menu-item sign-out-btn" aria-label="Sign Out">
              <span class="menu-item-text">Sign Out</span>
              <span class="menu-item-chevron">â†’</span>
            </button>
          </div>
        </div>
      </div>
    </aside>

    <header class="app-header" role="banner">
      <div class="brand">
        <div class="logo">G9</div>
        <div>
          <h1 class="brand-title gradient-text">The Tutor</h1>
          <div class="subtitle">AI Agent made for tutoring Grade 9 students</div>
        </div>
      </div>

      <div class="header-actions">
        <button id="toggleSidebar" class="icon-btn sidebar-toggle" aria-label="Toggle sidebar" aria-controls="sidebar"
          aria-expanded="true"><i data-lucide="panel-left"></i></button>
        <button id="badgesTab" class="icon-btn header-tab" aria-label="Badges" data-tab="badges">
          <i data-lucide="award"></i>
          <span>Badges</span>
        </button>
        <div id="examModeToggleMount"></div>
        <div class="profile-options">
          <button class="profile-pill active" aria-label="Alex profile">
            <span class="profile-pill-icon"><i data-lucide="user"></i></span>
            <span class="profile-pill-text">Alex</span>
          </button>
        </div>
      </div>
    </header>

    <main class="chat" role="main">
      <div class="liquidGlass-effect"></div>
      <div class="liquidGlass-tint"></div>
      <div class="liquidGlass-shine"></div>
      <div class="liquidGlass-content">
        <div id="examModeRoot" class="exam-mode-root" style="display: none;"></div>
        <div class="welcome-panel" id="welcomePanel">
          <div class="welcome-message">Welcome back, Alex! ðŸ‘‹</div>
          <div class="welcome-description">I'm your AI Study Tutor, here to help you learn and understand General. Ask
            me anything, and I'll explain concepts, solve problems, and guide you through your studies.</div>

          <div class="study-summary-cards">
            <div class="summary-card streak-summary">
              <div class="summary-icon"><i data-lucide="flame"></i></div>
              <div class="summary-content">
                <div class="summary-value">7</div>
                <div class="summary-label">Day Streak</div>
              </div>
            </div>
            <div class="summary-card time-summary">
              <div class="summary-icon"><i data-lucide="clock"></i></div>
              <div class="summary-content">
                <div class="summary-value">45m</div>
                <div class="summary-label">Today</div>
              </div>
            </div>
            <div class="summary-card points-summary">
              <div class="summary-icon"><i data-lucide="trophy"></i></div>
              <div class="summary-content">
                <div class="summary-value">1250</div>
                <div class="summary-label">Points</div>
              </div>
            </div>
          </div>

          <div class="action-buttons-grid">
            <button class="action-button" aria-label="Help with math homework">
              <span class="action-icon"><i data-lucide="pencil"></i></span>
              <span class="action-text">Help me with math homework</span>
            </button>
            <button class="action-button" aria-label="Explain a science concept">
              <span class="action-icon"><i data-lucide="flask-conical"></i></span>
              <span class="action-text">Explain a science concept</span>
            </button>
            <button class="action-button" aria-label="Review for my test">
              <span class="action-icon"><i data-lucide="bar-chart-3"></i></span>
              <span class="action-text">Review for my test</span>
            </button>
            <button class="action-button" aria-label="Check my essay">
              <span class="action-icon"><i data-lucide="file-text"></i></span>
              <span class="action-text">Check my essay</span>
            </button>
          </div>
        </div>

        <div class="messages" id="messages" role="log" aria-live="polite" style="display: none;"></div>

        <div class="badges-content" id="badges-content" style="display: none;">
          <div class="badges-header">
            <h2 class="badges-title">Your Badges</h2>
            <button class="icon-btn btn-clear" id="badgesRefreshBtn" type="button" aria-label="Refresh badges">Refresh</button>
          </div>
          
          <div class="badges-grid" id="badgesGrid">
            <!-- Badges will be populated here -->
          </div>
          
          <div class="badges-empty" id="badgesEmpty" style="display: none;">
            <div class="empty-icon"><i data-lucide="award"></i></div>
            <div class="empty-title">No badges yet</div>
            <div class="empty-message">Start learning and earning points to unlock your first badge!</div>
          </div>
        </div>

        <div class="composer" role="region" aria-label="Message composer">
          <button id="uploadBtn" class="icon-btn upload-btn" aria-label="Upload file" title="Upload file">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="17 8 12 3 7 8"></polyline>
              <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
          </button>
          <input id="inputBox" class="input" placeholder="Ask me anything..." aria-label="Message input" />
          <button id="sendBtn" class="send" aria-label="Send message" title="Send message">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
              stroke-linecap="round" stroke-linejoin="round">
              <line x1="22" y1="2" x2="11" y2="13"></line>
              <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
            </svg>
          </button>
          <button id="micBtn" class="icon-btn mic-btn" aria-label="Start speech input" title="Voice input">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
              <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
              <line x1="12" y1="19" x2="12" y2="23"></line>
              <line x1="8" y1="23" x2="16" y2="23"></line>
            </svg>
          </button>
          <button id="speakerBtn" class="icon-btn speaker-btn" aria-label="Read last answer" title="Read aloud">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M11 5L6 9H2v6h4l5 4V5z"></path>
              <path d="M15.5 8.5a5 5 0 010 7"></path>
              <path d="M19 7a8 8 0 010 10"></path>
            </svg>
          </button>
          <input type="file" id="fileInput" style="display: none;" accept=".pdf,.txt,.docx,.pptx,.jpg,.jpeg,.png"
            multiple>
        </div>
      </div>
    </main>

  </div>

  <div class="toast-wrap" id="toasts" aria-live="assertive" aria-atomic="true"></div>

  <script src="api.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
  <script src="auth.js"></script>
  <script src="googleSync.js"></script>
  <script src="progress.js"></script>
  <script src="reset.js"></script>
  <script src="timer.js"></script>
  <script src="points.js"></script>
  <script src="personalization_sync.js"></script>
  <script src="profile.js"></script>
  <script src="gamification_sync.js"></script>
  <script src="gamification.js"></script>
  <script src="badges.js"></script>
  <script src="voice_multimodal_ui.js"></script>
  <script src="chat.js"></script>
  <script src="mic.js"></script>
  <script src="upload.js"></script>
  <script src="settings.js"></script>
  <script src="account.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="ExamModeToggle/ExamModeContext.js"></script>
  <script src="ExamModeToggle/ExamModeUI.js"></script>
  <script src="ExamModeToggle/ExamModeToggle.js"></script>
  <script src="script.js"></script>
  <svg style="display:none">
    <defs>
      <filter id="glass-distortion">
        <feTurbulence baseFrequency="0.08" numOctaves="5" result="noise" />
        <feDisplacementMap in="SourceGraphic" in2="noise" scale="20" />
      </filter>
    </defs>
  </svg>
</body>

</html>